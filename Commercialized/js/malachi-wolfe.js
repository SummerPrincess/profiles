$(document).ready(()=>{let firstOpen=$(`#${$(".tab.selected").attr("opens")}`);firstOpen.show();$(".friend").each(function(){let image=$(this).attr("image"),tabs=$(this).children(".tab");if(!image){image="https://i.imgur.com/bdvn5nl.png";$(this).attr("image","https://i.imgur.com/bdvn5nl.png");}
$(this).css("background-image",`url(${image})`);if(tabs.length==0){console.log("No tabs");$(this).replaceWith($("<a>",{class:$(this).attr("class"),style:$(this).attr("style"),target:"_blank",href:$(this).attr("profile")}));}});});$(".tab").click(function(){let tab=$(`#${$(this).attr("opens")}`);if($(this).hasClass("selected")){return;}else{$(".content .scroller").hide();$(".tab").removeClass("selected");$(this).addClass("selected");tab.show();}});$(".friend").click(function(){let image=$(this).attr("image"),link=$(this).attr("profile"),name=$(this).attr("name"),style=`background-image:url(${image});`,tabs=$(this).children(".tab"),ctr=0;if(!link){link="#";}
if(!name){name="";}
if(tabs.length>0){$("<div>",{id:"closeOverlay",click:function(){let pop=$("#friendPopout");pop.removeClass("open");pop.addClass("close");$(this).fadeOut(500);setTimeout(()=>{pop.remove();$(this).remove();},500);}}).appendTo("body");$("#friendClose").fadeIn(500);$("<div>",{id:"friendPopout",class:"open"}).appendTo("body");$("<div>",{class:"popContent"}).appendTo("#friendPopout");$("<div>",{class:"header",}).appendTo("#friendPopout .popContent");$("<div>",{class:"pic",style:style}).appendTo(".popContent .header");$("<div>",{class:"name",html:name}).appendTo(".popContent .header");$("<a>",{class:"profileLink",href:link,target:(link=="#")?"":"_blank",html:"Go to Profile"}).appendTo(".popContent .header");$("<div>",{class:"body"}).appendTo("#friendPopout .popContent");$("<div>",{class:"tabs"}).appendTo(".popContent .body");$("<div>",{class:"tabContent"}).appendTo(".popContent .body");for(let i=0;i<tabs.length&&i<5;i++,ctr++){let tabName=$(tabs[i]).attr("tab-name"),content=$(tabs[i]).html(),genID=tabName.toLowerCase().replace(/ /g,"-").replace(/[^a-zA-Z0-9-_]/g,"");console.log(genID);$("<div>",{class:`friendTab${(ctr==0)?" selected":""}`,html:tabName,click:function(){let openTab=$(`#${genID}`);if(!$(this).hasClass("selected")){$(".tabContent .scroller").hide();$(".friendTab").removeClass("selected");$(this).addClass("selected");openTab.show();}}}).appendTo(".popContent .body .tabs");$("<div>",{class:"scroller",html:content,id:genID,style:(ctr==0)?"display: block;":""}).appendTo(".popContent .body .tabContent");}}});$("img.img").click(function(){let img=$(this).attr("src"),cur=$(this).index(),imgs=$(".img");$("<div>",{id:"galleryPopout"}).appendTo("body");$("<div>",{id:"closeOverlay",click:function(){let pop=$("#galleryPopout img");pop.removeClass("open");pop.addClass("close");$(this).fadeOut(500);$(".gallBtn").fadeOut(500);setTimeout(()=>{$("#galleryPopout").remove();},500);}}).appendTo("#galleryPopout");$("<div>",{id:"gallPrev",class:"gallBtn",click:function(){if(cur==0){cur=imgs.length-1;}else{cur--;}
img=imgs.eq(cur).attr("src");$("#galleryPopout img").replaceWith($("<img>",{src:img}));}}).appendTo("#galleryPopout");$("<img>",{src:img,class:"open"}).appendTo("#galleryPopout");$("<div>",{id:"gallNext",class:"gallBtn",click:function(){if(cur==imgs.length-1){cur=0;}else{cur++;}
img=imgs.eq(cur).attr("src");$("#galleryPopout img").replaceWith($("<img>",{src:img}));}}).appendTo("#galleryPopout");});